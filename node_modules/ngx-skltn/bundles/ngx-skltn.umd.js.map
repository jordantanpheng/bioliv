{"version":3,"file":"ngx-skltn.umd.js","sources":["ng://ngx-skltn/lib/directives/skltn-bone.directive.ts","ng://ngx-skltn/lib/services/skltn-config.service.ts","ng://ngx-skltn/lib/services/skltn.service.ts","ng://ngx-skltn/lib/skltn/skltn.component.ts","ng://ngx-skltn/lib/ngx-skltn.module.ts"],"sourcesContent":["import { Directive, ElementRef, Input, ContentChild, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[skltn-bone]',\n})\nexport class SkltnBoneDirective {\n\n  @Input() type: 'rect' | 'circle' | 'path';\n  @Input() rectRadius: number;\n  @Input() pathWidth: number;\n  @Input() pathHeight: number;\n  @ContentChild('boneTemp') template: TemplateRef<any>;\n\n  constructor(\n    public element: ElementRef\n  ) { }\n\n}\n","import { InjectionToken } from '@angular/core';\nimport { SkltnConfig } from '../interfaces/skltn-config';\n\nexport const SKLTN_CONFIG_TOKEN = new InjectionToken<SkltnConfig>('SkltnConfig');\n\n","import { Injectable, Inject } from '@angular/core';\nimport { SkltnConfig } from '../interfaces/skltn-config';\nimport { SKLTN_CONFIG_TOKEN } from './skltn-config.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SkltnService {\n\n  ids: string[] = [];\n\n  config: SkltnConfig;\n\n  private defaultConfig: SkltnConfig = {\n    rectRadius: 4,\n    bgFill: '#ddd',\n    flareFill: 'rgba(255, 255, 255, 0.6)',\n    flareWidth: '150px',\n    duration: 1200,\n    delay: 0,\n    timing: 'ease-in-out',\n  };\n\n  constructor(\n    @Inject(SKLTN_CONFIG_TOKEN) config: SkltnConfig,\n  ) {\n    this.config = Object.assign({}, this.defaultConfig, config);\n  }\n\n}\n","import {\n  Component, OnInit, Input, ContentChildren, QueryList, ElementRef,\n  ChangeDetectorRef, HostListener, AfterViewInit, Inject, NgZone, OnDestroy,\n} from '@angular/core';\nimport { SkltnBoneDirective } from '../directives/skltn-bone.directive';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { SkltnConfig } from '../interfaces/skltn-config';\nimport { SkltnService } from '../services/skltn.service';\n\n@Component({\n  selector: 'skltn-root',\n  templateUrl: './skltn.component.html',\n  styleUrls: ['./skltn.component.scss']\n})\nexport class SkltnComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() rectRadius: number;\n\n  @Input() bgFill: string;\n\n  @Input() flareFill: string;\n\n  @Input() flareWidth: string;\n\n  @Input() duration: number;\n\n  @Input() delay: number;\n\n  @Input() timing: string;\n\n  @Input() showSkltn = true;\n\n  @ContentChildren(SkltnBoneDirective) bones: QueryList<SkltnBoneDirective>;\n\n  viewBox: string;\n\n  shapes: any[];\n\n  parentClientRect: any;\n\n  animationCss: SafeHtml;\n\n  href: string;\n\n  sufix: string;\n\n  gradientId: string;\n\n  maskId: string;\n\n  checkHrefIntervalID: number;\n\n  updStream$ = new Subject();\n\n  defaultConfig: SkltnConfig = {\n    rectRadius: 4,\n    bgFill: '#ddd',\n    flareFill: 'rgba(255, 255, 255, 0.6)',\n    flareWidth: '150px',\n    duration: 1200,\n    delay: 0,\n    timing: 'ease-in-out',\n  };\n\n  constructor(\n    private skltnService: SkltnService,\n    private element: ElementRef,\n    private sanitizer: DomSanitizer,\n    private cd: ChangeDetectorRef,\n    private zone: NgZone,\n  ) {\n    const conf = this.skltnService.config;\n    this.rectRadius = conf.rectRadius;\n    this.bgFill = conf.bgFill;\n    this.flareFill = conf.flareFill;\n    this.flareWidth = conf.flareWidth;\n    this.duration = conf.duration;\n    this.delay = conf.delay;\n    this.timing = conf.timing;\n    this.sufix = this.getSufixWithID();\n    this.gradientId = 'gradient-' + this.sufix;\n    this.maskId = 'mask-' + this.sufix;\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: Event) {\n    this.updStream$.next();\n  }\n\n  ngOnInit() {\n    this.animationCss = this.sanitizer.bypassSecurityTrustHtml(`\n    <style>\n    @keyframes flareAnimation {\n        0% { x: calc(0% - ${this.flareWidth}); }\n        100% { x: 100%; }\n    }\n    .flare {\n      animation-name: flareAnimation;\n      animation-duration: ${this.duration}ms;\n      animation-timing-function: ${this.timing};\n      animation-iteration-count: infinite;\n      animation-delay: ${this.delay}ms;\n    }\n    </style>`);\n\n    // Update\n    this.updStream$.pipe(\n      debounceTime(100),\n    ).subscribe(() => this.calcShapes());\n\n    // Update href (Safari Bug, SVG Ref Path)\n    this.href = window.location.href;\n\n    this.zone.runOutsideAngular(() => {\n      this.checkHrefIntervalID = window.setInterval(() => {\n        if (this.href !== window.location.href) {\n          this.href = window.location.href;\n          this.cd.detectChanges();\n        }\n      }, 100);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.calcShapes();\n    this.cd.detectChanges();\n  }\n\n  ngOnDestroy() {\n    if (this.checkHrefIntervalID) {\n      window.clearInterval(this.checkHrefIntervalID);\n    }\n  }\n\n  getSufixWithID(): string {\n    return Math.random().toString(36).substr(2, 4) + '-skltn';\n  }\n\n  calcShapes(): void {\n    // Root SVG Element\n    const el = this.element.nativeElement;\n    this.parentClientRect = el.getBoundingClientRect();\n    this.viewBox = `0 0 ${this.parentClientRect.width} ${this.parentClientRect.height}`;\n\n    // SVG Shapes\n    this.shapes = this.bones.toArray().map(bone => {\n      const boneEl = bone.element.nativeElement;\n      const clientRect = boneEl.getBoundingClientRect();\n      const radius = bone.rectRadius || this.rectRadius;\n      if (bone.type === 'circle') {\n        return {\n          type: 'circle',\n          cx: clientRect.x - this.parentClientRect.x + clientRect.width / 2,\n          cy: clientRect.y - this.parentClientRect.y + clientRect.height / 2,\n          rx: clientRect.width / 2,\n          ry: clientRect.height / 2,\n        };\n      }\n      if (bone.type === 'path') {\n        const x = clientRect.x - this.parentClientRect.x;\n        const y = clientRect.y - this.parentClientRect.y;\n        let transform = `translate(${x}, ${y})`;\n        if (bone.pathWidth && bone.pathHeight) {\n          const xScale = (clientRect.width / bone.pathWidth).toFixed(2);\n          const yScale = (clientRect.height / bone.pathHeight).toFixed(2);\n          transform += ` scale(${xScale}, ${yScale})`;\n        }\n        return {\n          type: 'path',\n          width: clientRect.width,\n          height: clientRect.height,\n          transform,\n          template: bone.template,\n        };\n      }\n      return {\n        type: 'rect',\n        x: clientRect.x - this.parentClientRect.x,\n        y: clientRect.y - this.parentClientRect.y,\n        width: clientRect.width,\n        height: clientRect.height,\n        rx: radius,\n        ry: radius,\n      };\n    });\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SkltnComponent } from './skltn/skltn.component';\nimport { SkltnBoneDirective } from './directives/skltn-bone.directive';\nimport { SkltnService } from './services/skltn.service';\nimport { SkltnConfig } from './interfaces/skltn-config';\nimport { SKLTN_CONFIG_TOKEN } from './services/skltn-config.service';\n\n@NgModule({\n  declarations: [\n    SkltnComponent,\n    SkltnBoneDirective,\n  ],\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    SkltnComponent,\n    SkltnBoneDirective,\n  ]\n})\nexport class NgxSkltnModule {\n  static forRoot(config: Partial<SkltnConfig> = {}): ModuleWithProviders {\n    return {\n      ngModule: NgxSkltnModule,\n      providers: [{\n        provide: SKLTN_CONFIG_TOKEN,\n        useValue: config,\n      },\n      {\n        provide: SkltnService,\n        useClass: SkltnService,\n        deps: [ SKLTN_CONFIG_TOKEN ],\n      }]\n    };\n  }\n}\n"],"names":["Directive","ElementRef","Input","ContentChild","InjectionToken","Injectable","Inject","Subject","debounceTime","Component","DomSanitizer","ChangeDetectorRef","NgZone","ContentChildren","HostListener","NgModule","CommonModule"],"mappings":"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"}