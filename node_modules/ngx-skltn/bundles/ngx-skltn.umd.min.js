!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-skltn",["exports","@angular/core","@angular/common","@angular/platform-browser","rxjs","rxjs/operators"],e):e((t=t||self)["ngx-skltn"]={},t.ng.core,t.ng.common,t.ng.platformBrowser,t.rxjs,t.rxjs.operators)}(this,function(t,e,n,i,r,a){"use strict";var o=function(){function t(t){this.element=t}return t.decorators=[{type:e.Directive,args:[{selector:"[skltn-bone]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={type:[{type:e.Input}],rectRadius:[{type:e.Input}],pathWidth:[{type:e.Input}],pathHeight:[{type:e.Input}],template:[{type:e.ContentChild,args:["boneTemp"]}]},t}(),s=new e.InjectionToken("SkltnConfig"),l=function(){function t(t){this.ids=[],this.defaultConfig={rectRadius:4,bgFill:"#ddd",flareFill:"rgba(255, 255, 255, 0.6)",flareWidth:"150px",duration:1200,delay:0,timing:"ease-in-out"},this.config=Object.assign({},this.defaultConfig,t)}return t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[s]}]}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(s))},token:t,providedIn:"root"}),t}(),p=function(){function t(t,e,n,i,a){this.skltnService=t,this.element=e,this.sanitizer=n,this.cd=i,this.zone=a,this.showSkltn=!0,this.updStream$=new r.Subject,this.defaultConfig={rectRadius:4,bgFill:"#ddd",flareFill:"rgba(255, 255, 255, 0.6)",flareWidth:"150px",duration:1200,delay:0,timing:"ease-in-out"};var o=this.skltnService.config;this.rectRadius=o.rectRadius,this.bgFill=o.bgFill,this.flareFill=o.flareFill,this.flareWidth=o.flareWidth,this.duration=o.duration,this.delay=o.delay,this.timing=o.timing,this.sufix=this.getSufixWithID(),this.gradientId="gradient-"+this.sufix,this.maskId="mask-"+this.sufix}return t.prototype.onResize=function(t){this.updStream$.next()},t.prototype.ngOnInit=function(){var t=this;this.animationCss=this.sanitizer.bypassSecurityTrustHtml("\n    <style>\n    @keyframes flareAnimation {\n        0% { x: calc(0% - "+this.flareWidth+"); }\n        100% { x: 100%; }\n    }\n    .flare {\n      animation-name: flareAnimation;\n      animation-duration: "+this.duration+"ms;\n      animation-timing-function: "+this.timing+";\n      animation-iteration-count: infinite;\n      animation-delay: "+this.delay+"ms;\n    }\n    </style>"),this.updStream$.pipe(a.debounceTime(100)).subscribe(function(){return t.calcShapes()}),this.href=window.location.href,this.zone.runOutsideAngular(function(){t.checkHrefIntervalID=window.setInterval(function(){t.href!==window.location.href&&(t.href=window.location.href,t.cd.detectChanges())},100)})},t.prototype.ngAfterViewInit=function(){this.calcShapes(),this.cd.detectChanges()},t.prototype.ngOnDestroy=function(){this.checkHrefIntervalID&&window.clearInterval(this.checkHrefIntervalID)},t.prototype.getSufixWithID=function(){return Math.random().toString(36).substr(2,4)+"-skltn"},t.prototype.calcShapes=function(){var t=this,e=this.element.nativeElement;this.parentClientRect=e.getBoundingClientRect(),this.viewBox="0 0 "+this.parentClientRect.width+" "+this.parentClientRect.height,this.shapes=this.bones.toArray().map(function(e){var n=e.element.nativeElement.getBoundingClientRect(),i=e.rectRadius||t.rectRadius;if("circle"===e.type)return{type:"circle",cx:n.x-t.parentClientRect.x+n.width/2,cy:n.y-t.parentClientRect.y+n.height/2,rx:n.width/2,ry:n.height/2};if("path"===e.type){var r="translate("+(n.x-t.parentClientRect.x)+", "+(n.y-t.parentClientRect.y)+")";if(e.pathWidth&&e.pathHeight)r+=" scale("+(n.width/e.pathWidth).toFixed(2)+", "+(n.height/e.pathHeight).toFixed(2)+")";return{type:"path",width:n.width,height:n.height,transform:r,template:e.template}}return{type:"rect",x:n.x-t.parentClientRect.x,y:n.y-t.parentClientRect.y,width:n.width,height:n.height,rx:i,ry:i}})},t.decorators=[{type:e.Component,args:[{selector:"skltn-root",template:'<div [innerHTML]="animationCss"></div>\n\n<svg class="svg-root" x="0px" y="0px" [attr.viewBox]="viewBox" *ngIf="shapes?.length && showSkltn">\n\n  \x3c!-- Gradient --\x3e\n  <linearGradient [attr.id]="gradientId">\n      <stop class="stop stop--1" [attr.stop-color]="flareFill" stop-opacity="0" offset="0"></stop>\n      <stop class="stop stop--2" [attr.stop-color]="flareFill" stop-opacity="1" offset="50%"></stop>\n      <stop class="stop stop--3" [attr.stop-color]="flareFill" stop-opacity="0" offset="100%"></stop>\n    </linearGradient>\n\n  <defs>\n    \x3c!-- Mask --\x3e\n    <mask [attr.id]="maskId">\n      \x3c!-- Shapes --\x3e\n      <ng-container *ngFor="let shape of shapes">\n        \x3c!-- Rect Type --\x3e\n        <rect *ngIf="shape.type === \'rect\'" [attr.x]="shape.x" [attr.y]="shape.y" [attr.rx]="shape.rx"\n          [attr.ry]="shape.ry" [attr.width]="shape.width" [attr.height]="shape.height" fill="#FFFFFF" />\n        \x3c!-- Circle Type --\x3e\n        <ellipse *ngIf="shape.type === \'circle\'" [attr.cx]="shape.cx" [attr.cy]="shape.cy" [attr.rx]="shape.rx" [attr.ry]="shape.ry" fill="#FFFFFF"></ellipse>\n        \x3c!-- Path Type --\x3e\n        <ng-container *ngIf="shape.type === \'path\'">\n          <g fill="#FFFFFF" [attr.transform]="shape.transform">\n            <ng-container *ngTemplateOutlet="shape.template"></ng-container>\n          </g>\n        </ng-container>\n      </ng-container>\n    </mask>\n  </defs>\n\n  <g [attr.mask]="\'url(\' + href + \'#\' + maskId + \')\'">\n    \x3c!-- Background Rectangle --\x3e\n    <rect class="bg-fill" x="0" y="0" width="100%" height="100%" [attr.fill]="bgFill"></rect>\n\n    \x3c!-- Flare --\x3e\n    <rect class="flare" [attr.x]="\'-\' + flareWidth" y="0" [attr.width]="flareWidth" height="100%" [attr.fill]="\'url(\' + href + \'#\' + gradientId + \')\'"></rect>\n  </g>\n\n</svg>\n\n<ng-content></ng-content>\n',styles:[":host{display:block;position:relative}.svg-root{display:block;position:absolute;top:0;bottom:0;left:0;right:0;z-index:1}"]}]}],t.ctorParameters=function(){return[{type:l},{type:e.ElementRef},{type:i.DomSanitizer},{type:e.ChangeDetectorRef},{type:e.NgZone}]},t.propDecorators={rectRadius:[{type:e.Input}],bgFill:[{type:e.Input}],flareFill:[{type:e.Input}],flareWidth:[{type:e.Input}],duration:[{type:e.Input}],delay:[{type:e.Input}],timing:[{type:e.Input}],showSkltn:[{type:e.Input}],bones:[{type:e.ContentChildren,args:[o]}],onResize:[{type:e.HostListener,args:["window:resize",["$event"]]}]},t}(),c=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:s,useValue:e},{provide:l,useClass:l,deps:[s]}]}},t.decorators=[{type:e.NgModule,args:[{declarations:[p,o],imports:[n.CommonModule],exports:[p,o]}]}],t}();t.NgxSkltnModule=c,t.SKLTN_CONFIG_TOKEN=s,t.SkltnBoneDirective=o,t.SkltnComponent=p,t.SkltnService=l,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-skltn.umd.min.js.map