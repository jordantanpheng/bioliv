{"version":3,"file":"ngx-skltn.js","sources":["ng://ngx-skltn/lib/directives/skltn-bone.directive.ts","ng://ngx-skltn/lib/services/skltn-config.service.ts","ng://ngx-skltn/lib/services/skltn.service.ts","ng://ngx-skltn/lib/skltn/skltn.component.ts","ng://ngx-skltn/lib/ngx-skltn.module.ts"],"sourcesContent":["import { Directive, ElementRef, Input, ContentChild, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[skltn-bone]',\n})\nexport class SkltnBoneDirective {\n\n  @Input() type: 'rect' | 'circle' | 'path';\n  @Input() rectRadius: number;\n  @Input() pathWidth: number;\n  @Input() pathHeight: number;\n  @ContentChild('boneTemp') template: TemplateRef<any>;\n\n  constructor(\n    public element: ElementRef\n  ) { }\n\n}\n","import { InjectionToken } from '@angular/core';\nimport { SkltnConfig } from '../interfaces/skltn-config';\n\nexport const SKLTN_CONFIG_TOKEN = new InjectionToken<SkltnConfig>('SkltnConfig');\n\n","import { Injectable, Inject } from '@angular/core';\nimport { SkltnConfig } from '../interfaces/skltn-config';\nimport { SKLTN_CONFIG_TOKEN } from './skltn-config.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SkltnService {\n\n  ids: string[] = [];\n\n  config: SkltnConfig;\n\n  private defaultConfig: SkltnConfig = {\n    rectRadius: 4,\n    bgFill: '#ddd',\n    flareFill: 'rgba(255, 255, 255, 0.6)',\n    flareWidth: '150px',\n    duration: 1200,\n    delay: 0,\n    timing: 'ease-in-out',\n  };\n\n  constructor(\n    @Inject(SKLTN_CONFIG_TOKEN) config: SkltnConfig,\n  ) {\n    this.config = Object.assign({}, this.defaultConfig, config);\n  }\n\n}\n","import {\n  Component, OnInit, Input, ContentChildren, QueryList, ElementRef,\n  ChangeDetectorRef, HostListener, AfterViewInit, Inject, NgZone, OnDestroy,\n} from '@angular/core';\nimport { SkltnBoneDirective } from '../directives/skltn-bone.directive';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { SkltnConfig } from '../interfaces/skltn-config';\nimport { SkltnService } from '../services/skltn.service';\n\n@Component({\n  selector: 'skltn-root',\n  templateUrl: './skltn.component.html',\n  styleUrls: ['./skltn.component.scss']\n})\nexport class SkltnComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() rectRadius: number;\n\n  @Input() bgFill: string;\n\n  @Input() flareFill: string;\n\n  @Input() flareWidth: string;\n\n  @Input() duration: number;\n\n  @Input() delay: number;\n\n  @Input() timing: string;\n\n  @Input() showSkltn = true;\n\n  @ContentChildren(SkltnBoneDirective) bones: QueryList<SkltnBoneDirective>;\n\n  viewBox: string;\n\n  shapes: any[];\n\n  parentClientRect: any;\n\n  animationCss: SafeHtml;\n\n  href: string;\n\n  sufix: string;\n\n  gradientId: string;\n\n  maskId: string;\n\n  checkHrefIntervalID: number;\n\n  updStream$ = new Subject();\n\n  defaultConfig: SkltnConfig = {\n    rectRadius: 4,\n    bgFill: '#ddd',\n    flareFill: 'rgba(255, 255, 255, 0.6)',\n    flareWidth: '150px',\n    duration: 1200,\n    delay: 0,\n    timing: 'ease-in-out',\n  };\n\n  constructor(\n    private skltnService: SkltnService,\n    private element: ElementRef,\n    private sanitizer: DomSanitizer,\n    private cd: ChangeDetectorRef,\n    private zone: NgZone,\n  ) {\n    const conf = this.skltnService.config;\n    this.rectRadius = conf.rectRadius;\n    this.bgFill = conf.bgFill;\n    this.flareFill = conf.flareFill;\n    this.flareWidth = conf.flareWidth;\n    this.duration = conf.duration;\n    this.delay = conf.delay;\n    this.timing = conf.timing;\n    this.sufix = this.getSufixWithID();\n    this.gradientId = 'gradient-' + this.sufix;\n    this.maskId = 'mask-' + this.sufix;\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: Event) {\n    this.updStream$.next();\n  }\n\n  ngOnInit() {\n    this.animationCss = this.sanitizer.bypassSecurityTrustHtml(`\n    <style>\n    @keyframes flareAnimation {\n        0% { x: calc(0% - ${this.flareWidth}); }\n        100% { x: 100%; }\n    }\n    .flare {\n      animation-name: flareAnimation;\n      animation-duration: ${this.duration}ms;\n      animation-timing-function: ${this.timing};\n      animation-iteration-count: infinite;\n      animation-delay: ${this.delay}ms;\n    }\n    </style>`);\n\n    // Update\n    this.updStream$.pipe(\n      debounceTime(100),\n    ).subscribe(() => this.calcShapes());\n\n    // Update href (Safari Bug, SVG Ref Path)\n    this.href = window.location.href;\n\n    this.zone.runOutsideAngular(() => {\n      this.checkHrefIntervalID = window.setInterval(() => {\n        if (this.href !== window.location.href) {\n          this.href = window.location.href;\n          this.cd.detectChanges();\n        }\n      }, 100);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.calcShapes();\n    this.cd.detectChanges();\n  }\n\n  ngOnDestroy() {\n    if (this.checkHrefIntervalID) {\n      window.clearInterval(this.checkHrefIntervalID);\n    }\n  }\n\n  getSufixWithID(): string {\n    return Math.random().toString(36).substr(2, 4) + '-skltn';\n  }\n\n  calcShapes(): void {\n    // Root SVG Element\n    const el = this.element.nativeElement;\n    this.parentClientRect = el.getBoundingClientRect();\n    this.viewBox = `0 0 ${this.parentClientRect.width} ${this.parentClientRect.height}`;\n\n    // SVG Shapes\n    this.shapes = this.bones.toArray().map(bone => {\n      const boneEl = bone.element.nativeElement;\n      const clientRect = boneEl.getBoundingClientRect();\n      const radius = bone.rectRadius || this.rectRadius;\n      if (bone.type === 'circle') {\n        return {\n          type: 'circle',\n          cx: clientRect.x - this.parentClientRect.x + clientRect.width / 2,\n          cy: clientRect.y - this.parentClientRect.y + clientRect.height / 2,\n          rx: clientRect.width / 2,\n          ry: clientRect.height / 2,\n        };\n      }\n      if (bone.type === 'path') {\n        const x = clientRect.x - this.parentClientRect.x;\n        const y = clientRect.y - this.parentClientRect.y;\n        let transform = `translate(${x}, ${y})`;\n        if (bone.pathWidth && bone.pathHeight) {\n          const xScale = (clientRect.width / bone.pathWidth).toFixed(2);\n          const yScale = (clientRect.height / bone.pathHeight).toFixed(2);\n          transform += ` scale(${xScale}, ${yScale})`;\n        }\n        return {\n          type: 'path',\n          width: clientRect.width,\n          height: clientRect.height,\n          transform,\n          template: bone.template,\n        };\n      }\n      return {\n        type: 'rect',\n        x: clientRect.x - this.parentClientRect.x,\n        y: clientRect.y - this.parentClientRect.y,\n        width: clientRect.width,\n        height: clientRect.height,\n        rx: radius,\n        ry: radius,\n      };\n    });\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SkltnComponent } from './skltn/skltn.component';\nimport { SkltnBoneDirective } from './directives/skltn-bone.directive';\nimport { SkltnService } from './services/skltn.service';\nimport { SkltnConfig } from './interfaces/skltn-config';\nimport { SKLTN_CONFIG_TOKEN } from './services/skltn-config.service';\n\n@NgModule({\n  declarations: [\n    SkltnComponent,\n    SkltnBoneDirective,\n  ],\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    SkltnComponent,\n    SkltnBoneDirective,\n  ]\n})\nexport class NgxSkltnModule {\n  static forRoot(config: Partial<SkltnConfig> = {}): ModuleWithProviders {\n    return {\n      ngModule: NgxSkltnModule,\n      providers: [{\n        provide: SKLTN_CONFIG_TOKEN,\n        useValue: config,\n      },\n      {\n        provide: SkltnService,\n        useClass: SkltnService,\n        deps: [ SKLTN_CONFIG_TOKEN ],\n      }]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}